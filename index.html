<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>Check MP Topics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">

        <p id="warningTel" class="alert alert-warning alert-dismissible fade show hidden" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
            </svg>
            Si vous êtes sur téléphone ou tablette, l'outil ne récupérera aucun sujet.
            Pour l'utiliser vous devez passer en "mode desktop".

            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </p>

        <div class="accordion" id="accordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        Critères de filtres
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordion">
                    <div class="accordion-body">
                        Sont filtrés les messages dont :
                        <ul>
                            <li>Le créateur est "Invité"</li>
                            <li>Le créateur est "Mister MP", "Mister J", "Mister K", "Mister L", "Miss E", <i>sauf</i> s'il s'agit d'un centre commercial</li>
                            <li>Le nom du topic contient "(non modéré)", "[non modéré]", "(non modere)", "[non modere]", "[p2b]", "concours de coordination n°"</li>
                            <li>Le sous-titre contient la liste précédente ou "non modéré", "non modere", "non-modéré", "non-modere"</li>
                            <li>La dernière réponse a été faite par "Invité"</li>
                            <li>La dernière réponse a été faite par "Mister J", "Mister K", "Mister L", "Miss E"</li>
                            <li>La dernière réponse a été faite par "Mister MP" <i>sauf</i> s'il s'agit d'un sujet initié par un scientifique, un sbire, un ranger ou un agent et qu'il y a "mission" dans le titre ou sous-titre</li>
                            <li>
                                Le dernier message date d'il y a plus d'un mois
                                <ul>
                                    <li>
                                        Parfois, le serveur ne renvoie pas l'année. Dans ces cas là, pour son filtre,
                                        l'outil considère que l'année est celle en cours.
                                        Alors, il peut y avoir des sujets qui ressortent mais qui date d'une année précédente,
                                        mais toujours dans la limite du mois.
                                        Les autres critères de filtre ne sont pas affectés.<br>
                                        Exemple si on est en mars 2024:
                                        <ul>
                                            <li>Un sujet récupéré sans année de mars 2022 -> sera affiché</li>
                                            <li>Un sujet récupéré sans année de janvier 2022 -> sera caché</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>

                        En cas de sujet n'apparaissant pas dans la liste alors qu'il devrait, contacter Luna
                        (préférence pour un MP que ce soit forum ou Discord, pour être sûre de voir votre message)
                        pour correction des filtres. Ne pas hésiter à la contacter pour des demandes d'améliorations
                        ou des idées pour affiner les filtres.
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Que faire en cas de ligne rouge ?
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordion">
                    <div class="accordion-body">
                        <b>Si la ligne conserne Ile d'Hisui, Jaderaude, Mont Strueux, Zone Fluviale, Nord de Septentria</b><br>
                        C'est normal. Les zones ne sont pas accessibles aux invités, il n'est donc pas possible de récupérer les informations de ces endroits.
                        Ils sont simplement listés pour ne pas les oublier lors des tours de modération.
                        <br><br>
                        <b>Autres cas</b>
                        <ol>
                            <li>Ouvrir la console du navigateur (F12 par défaut).</li>
                            <li>Repérer les lignes en rouge</li>
                            <li>
                                Si le code d'état est 429 (voir screen), cela signifie qu'on a un peu trop spammer le serveur.
                                Dans ce cas là, attendre quelques instants (quelques dizaines de secondes ?) avant de changer de région ou
                                de relancer le scan de la région. Ce n'est pas obligatoire, mais vous pouvez remonter le soucis à Luna.
                                Si ça arrive trop souvent pendant les tours de modération, elle mettra en place un cooldown entre
                                deux requêtes pour essayer de limiter l'apparition du problème. <br>
                                <img src="error_429.png" alt="screen">
                            </li>
                            <li>
                                Dans les autres cas, faire un screen ou un copier-coller des messages d'erreur et les
                                transmettre à Luna pour analyse et correction.
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <div>
            A surveillé qu'il apparait toujours entre le moment où Thomas lance son dé et la modération :
            <a href="https://master-poke.forumactif.fr/t31057-mission-duol-olive-empoisonnee" target="_blank">Mission Honoka et Thomas</a> (Kanto - Cramois'ile)
        </div>

        <div class="navigation">
            <button class="btn btn-primary" id="kantoBtn">Kanto</button>
            <button class="btn btn-primary" id="johtoBtn">Johto</button>
            <button class="btn btn-primary" id="hoennBtn">Hoenn</button>
            <button class="btn btn-primary" id="sinnohBtn">Sinnoh</button>
            <button class="btn btn-primary" id="unysBtn">Unys</button>
            <button class="btn btn-primary" id="kalosBtn">Kalos</button>
            <button class="btn btn-primary" id="alolaBtn">Alola</button>
            <button class="btn btn-primary" id="galarBtn">Galar</button>
            <button class="btn btn-primary" id="paldeaBtn">Paldea</button>
            <button class="btn btn-primary" id="mtBtn">Master Tower</button>
            <button class="btn btn-primary" id="almiaBtn">Almia</button>
            <button class="btn btn-primary" id="hqBtn">QG des Rangs RP</button>
        </div>

        <table class="table table-hover table-sm table-bordered table-responsive">
            <thead>
                <tr>
                    <th>Sujet</th>
                    <th>Créateur</th>
                    <th>Dernier posteur</th>
                    <th>Info' sup'</th>
                    <th>Dernière réponse</th>
                    <th>Lien vers le dernier message</th>
                </tr>
            </thead>
            <tbody id="table-content"></tbody>
        </table>
    </div>
</body>
</html>

<script src="script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous">
</script>
